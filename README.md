# –ú–∏–Ω–∏-—Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∞–π—Ç–æ–≤

–õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–µ–±-—Å–∞–π—Ç–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π —á–∞—Å—Ç–æ—Ç–æ–π
- ‚úÖ –ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (DNS, TCP, TLS, TTFB, TOTAL)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ HTML-–º–∞—Ä–∫–µ—Ä—ã
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π: OK / SLOW / DOWN
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram —Å –∞–Ω—Ç–∏—Å–ø–∞–º-–ª–æ–≥–∏–∫–æ–π
- ‚úÖ –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- curl
- SQLite3 (–æ–±—ã—á–Ω–æ –≤—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–∞–≤ Python)
- Linux VPS

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ–±—Ä–∞–∑.

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone <your-repo-url>
cd WebSite-Monitoring
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Telegram:

```bash
cat > .env << EOF
BOT_TOKEN=your_bot_token_here
CHAT_ID=your_chat_id_here
EOF
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `targets.yml` –ø–æ–¥ –≤–∞—à–∏ —Å–∞–π—Ç—ã

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ docker-compose:

```bash
docker-compose up -d
```

5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
docker-compose logs -f
```

6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
docker-compose down
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∏–∑ Docker Hub

```bash
docker run -d \
  --name mini-monitor \
  --restart unless-stopped \
  -e BOT_TOKEN=your_bot_token \
  -e CHAT_ID=your_chat_id \
  -v $(pwd)/targets.yml:/app/targets.yml:ro \
  -v $(pwd)/data:/app/data \
  your-dockerhub-username/website-monitoring:latest
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Docker, –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./data`:
- `monitor.db` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- `monitor.log` - –ª–æ–≥–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `targets.yml` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker-compose restart
```

–ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑:

```bash
docker restart mini-monitor
```

### üì¶ –ü—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–±–µ–∑ Docker)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ –≤–∞—à VPS:

```bash
cd /opt
mkdir monitor
cd monitor
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å—é–¥–∞
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip3 install -r requirements.txt
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ targets.yml
cp targets.yml targets.yml.local
nano targets.yml.local

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
cat > .env << EOF
BOT_TOKEN=your_bot_token_here
CHAT_ID=your_chat_id_here
EOF
```

4. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x monitor.py
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### targets.yml

–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML:

```yaml
defaults:
  timeout_sec: 20
  user_agent: "mini-monitor/1.0"
  follow_redirects: true
  compressed: true
  retention_days: 14
  max_workers: 6
  max_checks_per_run: 10

alert_profiles:
  default:
    warn_ttfb_sec: 1.5      # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ TTFB >= 1.5s
    crit_ttfb_sec: 3.0      # –ö—Ä–∏—Ç–∏—á–Ω–æ –ø—Ä–∏ TTFB >= 3.0s
    fail_count_to_alert: 2  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ä—è–¥ –ø–ª–æ—Ö–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –∞–ª–µ—Ä—Ç–∞
    recover_count: 2        # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ä—è–¥ —É—Å–ø–µ—à–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
    remind_every_sec: 3600  # –ù–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥
    cooldown_sec: 300       # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

sites:
  - name: "MySite"
    base: "https://example.com"
    pages:
      - name: "home"
        path: "/"
        every_sec: 300              # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
        token: "<!-- MONITOR:home id=abc123 -->"
        expect_http: [200]
        alert_profile: "default"
```

### HTML-–º–∞—Ä–∫–µ—Ä

–î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π HTML-–º–∞—Ä–∫–µ—Ä –≤ –∫–æ–Ω–µ—Ü HTML-–¥–æ–∫—É–º–µ–Ω—Ç–∞:

```html
<!-- MONITOR:site=example.com page=home id=abc123 -->
```

–ú–∞—Ä–∫–µ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏–ª–∞—Å—å –∏ –Ω–µ –±—ã–ª–∞ –æ–±—Ä–µ–∑–∞–Ω–∞ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏.

### Telegram Bot

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
2. –ü–æ–ª—É—á–∏—Ç–µ `BOT_TOKEN`
3. –ü–æ–ª—É—á–∏—Ç–µ `CHAT_ID` (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot))
4. –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ —Ñ–∞–π–ª `.env`

## –ó–∞–ø—É—Å–∫

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
python3 monitor.py
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ cron

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab:

```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:

```
* * * * * flock -n /tmp/mini-monitor.lock cd /opt/monitor && python3 monitor.py >> /opt/monitor/monitor.log 2>&1
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É. –°–∫—Ä–∏–ø—Ç —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç, –∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∏—Ö —á–∞—Å—Ç–æ—Ç–µ (`every_sec`).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ monitor.py          # –ì–ª–∞–≤–Ω—ã–π runner-—Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ config.py           # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ db.py               # –†–∞–±–æ—Ç–∞ —Å SQLite
‚îú‚îÄ‚îÄ checker.py          # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ curl
‚îú‚îÄ‚îÄ alerts.py           # –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ targets.yml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile          # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml  # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .dockerignore       # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ docker-build.yml  # CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ data/               # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏ Docker)
‚îÇ   ‚îú‚îÄ‚îÄ monitor.db      # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ monitor.log     # –õ–æ–≥–∏
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —á–µ—Ä–µ–∑ cron
2. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–º–µ—â–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ö–µ—à–∞ –µ—ë ID, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—É—é –ø–æ—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è curl —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è HTTP-–∫–æ–¥
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ HTML-–º–∞—Ä–∫–µ—Ä–∞
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ (OK/SLOW/DOWN)
4. **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**: –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ ThreadPoolExecutor
5. **–ê–ª–µ—Ä—Ç–∏–Ω–≥**: –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å —É—á—ë—Ç–æ–º –∞–Ω—Ç–∏—Å–ø–∞–º-–ª–æ–≥–∏–∫–∏
6. **–û—á–∏—Å—Ç–∫–∞**: –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

## –°–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü

- **OK**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å, –º–∞—Ä–∫–µ—Ä –Ω–∞–π–¥–µ–Ω, TTFB < warn_ttfb_sec
- **SLOW**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å, –º–∞—Ä–∫–µ—Ä –Ω–∞–π–¥–µ–Ω, –Ω–æ TTFB >= warn_ttfb_sec
  - WARN: warn_ttfb_sec ‚â§ TTFB < crit_ttfb_sec
  - CRIT: TTFB ‚â• crit_ttfb_sec
- **DOWN**: –õ—é–±–æ–µ –∏–∑:
  - –û—à–∏–±–∫–∞ curl / timeout
  - HTTP-–∫–æ–¥ –Ω–µ –∏–∑ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö
  - HTML-–º–∞—Ä–∫–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω

## –ê–ª–µ—Ä—Ç–∏–Ω–≥

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

1. **–ü–µ—Ä–µ—Ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: OK ‚Üí SLOW/DOWN (–ø–æ—Å–ª–µ fail_count_to_alert –ø–æ–¥—Ä—è–¥ –ø–ª–æ—Ö–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: SLOW/DOWN ‚Üí OK (–ø–æ—Å–ª–µ recover_count –ø–æ–¥—Ä—è–¥ —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)
3. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ**: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ remind_every_sec —Å–µ–∫—É–Ω–¥

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏: `cooldown_sec` —Å–µ–∫—É–Ω–¥.

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:

- **checks**: –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **alert_state**: –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `retention_days` –¥–Ω–µ–π.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `CHAT_ID` - ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `CONFIG_PATH` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `targets.yml`)
- `DB_PATH` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `monitor.db`)

## –ü—Ä–∏–º–µ—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```
üî¥ DOWN
Site: MySite
Page: home
State: DOWN
URL: https://example.com/
HTTP: 500
Error: HTML marker not found
```

```
üü† SLOW
Site: MySite
Page: search
State: SLOW
URL: https://example.com/search
HTTP: 200
TTFB: 2.450s
Total: 3.120s
```

```
üü¢ RECOVERED
Site: MySite
Page: home
State: OK
URL: https://example.com/
HTTP: 200
TTFB: 0.850s
Total: 1.200s
```

## –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤—Ä—É—á–Ω—É—é:

```bash
python3 monitor.py
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
sqlite3 monitor.db "SELECT * FROM checks ORDER BY timestamp DESC LIMIT 10;"

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π –∞–ª–µ—Ä—Ç–æ–≤
sqlite3 monitor.db "SELECT * FROM alert_state;"
```

## CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Docker Hub —á–µ—Ä–µ–∑ GitHub Actions.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã:
   - `DOCKER_USERNAME` - –≤–∞—à –ª–æ–≥–∏–Ω –Ω–∞ Docker Hub
   - `DOCKER_PASSWORD` - —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ Docker Hub (–Ω–µ –ø–∞—Ä–æ–ª—å!)

3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ Docker Hub:
   - –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://hub.docker.com/settings/security
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Access Token
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –∫–∞–∫ `DOCKER_PASSWORD`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:
- Push –≤ –≤–µ—Ç–∫–∏ `main` –∏–ª–∏ `master` ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –ø—É—à–∏—Ç –æ–±—Ä–∞–∑ —Å —Ç–µ–≥–∞–º–∏ `latest` –∏ `main`
- Push —Ç–µ–≥–∞ `v*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v1.0.0`) ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –ø—É—à–∏—Ç –æ–±—Ä–∞–∑ —Å –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏
- Pull Request ‚Üí —Ç–æ–ª—å–∫–æ —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ (–Ω–µ –ø—É—à–∏—Ç)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∏–∑ Docker Hub

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD, –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```bash
docker pull your-dockerhub-username/website-monitoring:latest
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

